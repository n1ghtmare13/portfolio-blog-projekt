---
// src/layouts/Layout.astro

// --- Imports ---

// This file manages loading and importing custom styles and Bootstrap.
import '../styles/main.scss';

// Import Fira Code font from npm
import '@fontsource/fira-code/400.css'; // Regular weight
import '@fontsource/fira-code/700.css'; // Bold weight

// This imports the component for smooth page transitions.
import { ClientRouter } from 'astro:transitions';

// --- Component Props ---
// Defines that this layout expects a 'title' property for each page.
export interface Props {
  title: string;
}
const { title } = Astro.props;

// --- Server-side Logic ---
const currentYear = new Date().getFullYear();
---

<!doctype html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Portfolio â€“ projekty i blog." />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <ClientRouter />

    <title>{title} | Portfolio Projekt</title>
  </head>
  <body>
    <!-- NAVIGATION SECTION -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
      <div class="container">
        {/* Main logo/brand link points to the homepage */}
        <a class="navbar-brand" href="/">Portfolio</a>

        {/* Hamburger menu button for mobile */}
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#main-nav"
          aria-controls="main-nav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        {/* Collapsible navigation links */}
        <div class="collapse navbar-collapse" id="main-nav">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="/projekty">Projekty</a>
            </li>
            <li class="nav-item"><a class="nav-link" href="/blog">Blog</a></li>
            <li class="nav-item">
              <a class="nav-link" href="/o-mnie">O Mnie</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/kontakt">Kontakt</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    {/* Page content from other .astro files will be injected here. */}
    <slot />

    <!-- FOOTER SECTION -->
    <footer class="bg-dark text-white text-center py-3">
      <div class="container">
        <p class="mb-0">&copy; {currentYear}</p>
      </div>
    </footer>

    {/* Bootstrap JS for client-side interactivity */}
    <script>
      function initializeBootstrap() {
        // Dynamically import the FULL Bootstrap JS bundle
        import('bootstrap/dist/js/bootstrap.bundle.min.js');
      }
      // Listen for the 'astro:page-load' event, which is fired
      // after each page transition (thanks to ClientRouter).
      document.addEventListener('astro:page-load', initializeBootstrap);
    </script>
  </body>
</html>
